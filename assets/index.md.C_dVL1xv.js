import{_ as i,o as a,c as n,a2 as e}from"./chunks/framework.4MUDd9zK.js";const o=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"home","hero":{"name":"FUNDAL","text":"Fortran UNified Device Acceleration Library","tagline":"A pure Fortran library providing a unified API for GPU/device memory management over OpenACC and OpenMP backends ‚Äî one interface, any accelerator.","actions":[{"theme":"brand","text":"Guide","link":"/guide/"},{"theme":"alt","text":"API Reference","link":"/guide/api-reference"},{"theme":"alt","text":"View on GitHub","link":"https://github.com/szaghi/FUNDAL"}]},"features":[{"icon":"üöÄ","title":"OpenACC & OpenMP","details":"Unified API covering both OpenACC and OpenMP backends. The backend is selected at compile time ‚Äî no conditional code required in user programs."},{"icon":"üîó","title":"Seamless Memory Model","details":"Structured (pure device) and unstructured (host-mapped) memory models. Allocate, copy, and free device memory with consistent Fortran-idiomatic calls."},{"icon":"üåê","title":"MPI Multi-Device","details":"Built-in MPI handler class for distributing work across multiple GPUs in a cluster, with device initialisation, barriers, and timing utilities."},{"icon":"üõ†Ô∏è","title":"Multi-Compiler Support","details":"Tested with NVIDIA nvfortran, Intel IFX, GNU gfortran, and AMD Flang. Builds with FoBiS.py or GNU Make."},{"icon":"üÜì","title":"Free & Open Source","details":"Multi-licensed ‚Äî GPLv3 for FOSS projects, BSD 2/3-Clause or MIT for commercial use."}]},"headers":[],"relativePath":"index.md","filePath":"index.md"}'),t={name:"index.md"};function l(h,s,k,p,r,d){return a(),n("div",null,[...s[0]||(s[0]=[e(`<h2 id="quick-start" tabindex="-1">Quick start <a class="header-anchor" href="#quick-start" aria-label="Permalink to &quot;Quick start&quot;">‚Äã</a></h2><p>A minimal FUNDAL program: allocate device memory, copy data to the GPU, run a kernel, copy back.</p><div class="language-fortran vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">fortran</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">program</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fundal_taste</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">intrinsic</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> iso_fortran_env</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">only :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> I4P</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">int32, R8P</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">real64</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            ::</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fundal</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">implicit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> none</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">real</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(R8P), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pointer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a_dev(:,:,:)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! device memory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">real</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(R8P), </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">pointer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b_hos(:,:,:)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! host   memory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(I4P)       </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ierr</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">integer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(I4P)       </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i, j, k</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! initialise environment global variables</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">myhos   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dev_get_host_num()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">devtype </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dev_get_device_type()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">call</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dev_set_device_num</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mydev   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dev_get_device_num()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! allocate device memory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">call</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dev_alloc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fptr_dev</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a_dev,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> lbounds</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> ubounds</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> ierr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ierr,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> dev_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mydev)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! allocate and set host memory</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">allocate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b_hos(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b_hos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -3._R8P</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">! copy to device, work on device, copy back</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">call</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dev_memcpy_to_device</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dst</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a_dev,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b_hos)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">!$acc parallel loop independent deviceptr(a_dev) collapse(3)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">!$omp target teams distribute parallel do collapse(3) has_device_addr(a_dev)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> k</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> j</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  a_dev(i,j,k) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a_dev(i,j,k) / </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2._R8P</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enddo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enddo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enddo</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">call</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dev_memcpy_from_device</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dst</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">b_hos,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> src</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a_dev)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">print*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b_hos</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">endprogram</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fundal_taste</span></span></code></pre></div><p>Device memory is declared as <code>pointer</code>; host memory can be <code>pointer</code> or <code>allocatable</code>. OpenACC and OpenMP pragmas coexist safely ‚Äî unrecognised directives are ignored by the compiler.</p><h2 id="authors" tabindex="-1">Authors <a class="header-anchor" href="#authors" aria-label="Permalink to &quot;Authors&quot;">‚Äã</a></h2><ul><li>Stefano Zaghi ‚Äî <a href="mailto:stefano.zaghi@cnr.it" target="_blank" rel="noreferrer">stefano.zaghi@cnr.it</a></li><li>Giacomo Rossi ‚Äî <a href="mailto:giacomo.rossi@intel.com" target="_blank" rel="noreferrer">giacomo.rossi@intel.com</a></li><li>Andrea di Mascio ‚Äî <a href="mailto:andrea.dimascio@univaq.it" target="_blank" rel="noreferrer">andrea.dimascio@univaq.it</a></li><li>Francesco Salvadore ‚Äî <a href="mailto:f.salvadore@cineca.it" target="_blank" rel="noreferrer">f.salvadore@cineca.it</a></li></ul><h2 id="copyrights" tabindex="-1">Copyrights <a class="header-anchor" href="#copyrights" aria-label="Permalink to &quot;Copyrights&quot;">‚Äã</a></h2><p>FUNDAL is distributed under a multi-licensing system:</p><table tabindex="0"><thead><tr><th>Use case</th><th>License</th></tr></thead><tbody><tr><td>FOSS projects</td><td><a href="http://www.gnu.org/licenses/gpl-3.0.html" target="_blank" rel="noreferrer">GPL v3</a></td></tr><tr><td>Closed source / commercial</td><td><a href="http://opensource.org/licenses/BSD-2-Clause" target="_blank" rel="noreferrer">BSD 2-Clause</a></td></tr><tr><td>Closed source / commercial</td><td><a href="http://opensource.org/licenses/BSD-3-Clause" target="_blank" rel="noreferrer">BSD 3-Clause</a></td></tr><tr><td>Closed source / commercial</td><td><a href="http://opensource.org/licenses/MIT" target="_blank" rel="noreferrer">MIT</a></td></tr></tbody></table><blockquote><p>Anyone interested in using, developing, or contributing to FUNDAL is welcome ‚Äî pick the license that best fits your needs.</p></blockquote>`,10)])])}const g=i(t,[["render",l]]);export{o as __pageData,g as default};
